# –£—Ä–æ–∫ 2.3: –ö–æ–º–ø–æ–∑–∏—Ü–∏—è vs –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞
–ò–∑—É—á–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ "Favor Composition over Inheritance" –∏ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤ –º–µ–∂–¥—É –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º C++.

## üìö –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:

1. **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (Inheritance)** - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ "is-a"
2. **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è (Composition)** - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ "has-a"
3. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è (Aggregation)** - —Å–ª–∞–±–∞—è —Ñ–æ—Ä–º–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
4. **–î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Delegation)** - –ø–µ—Ä–µ–¥–∞—á–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

## üî¨ –ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∞–Ω–∞–ª–∏–∑—É

–ö–∞–∂–¥—ã–π –ø–æ–¥—Ö–æ–¥ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è:
- **–¢–µ–æ—Ä–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤** - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
- **–¢–µ–æ—Ä–∏–∏ –≥—Ä–∞—Ñ–æ–≤** - –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –∏ —Ü–∏–∫–ª–æ–≤ –≤ –∏–µ—Ä–∞—Ä—Ö–∏—è—Ö
- **–¢–µ–æ—Ä–∏–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** - –≤–ª–∏—è–Ω–∏–µ –Ω–∞ coupling –∏ cohesion
- **–≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π** - –¥–∞–Ω–Ω—ã–µ –æ maintainability –∏ flexibility

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `inheritance_example.cpp` - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –µ–≥–æ –ø—Ä–æ–±–ª–µ–º
- `composition_example.cpp` - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –µ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
- `comparison_analysis.cpp` - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–¥—Ö–æ–¥–æ–≤
- `real_world_examples.cpp` - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üé® –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### 1. –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (Inheritance)
**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –ú–µ—Ö–∞–Ω–∏–∑–º —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**:
```
‚àÄA, B ‚àà Classes: B inherits A ‚üπ B ‚äÜ A
–≥–¥–µ ‚äÜ –æ–∑–Ω–∞—á–∞–µ—Ç "—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ–º"
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä**: –ò–µ—Ä–∞—Ä—Ö–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Fragile Base Class Problem
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Diamond Problem
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Tight Coupling

### 2. –ö–æ–º–ø–æ–∑–∏—Ü–∏—è (Composition)
**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã –∫–∞–∫ —á–∞—Å—Ç–∏.

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**:
```
‚àÄA, B ‚àà Objects: A composed_of B ‚üπ B ‚àà parts(A)
–≥–¥–µ parts(A) = {x | x —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—ä–µ–∫—Ç–∞ A}
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä**: –ê–≤—Ç–æ–º–æ–±–∏–ª—å –∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: Loose Coupling
- ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: Flexibility
- ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: Testability

### 3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è (Aggregation)
**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –°–ª–∞–±–∞—è —Ñ–æ—Ä–º–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏, –≥–¥–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä**: –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –∏ —Å—Ç—É–¥–µ–Ω—Ç—ã
- –°—Ç—É–¥–µ–Ω—Ç—ã –º–æ–≥—É—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –±–µ–∑ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞
- –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

## üîç –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤

### –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- Tight coupling
- Fragile base class problem
- Diamond problem
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞

### –ö–æ–º–ø–æ–∑–∏—Ü–∏—è:
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- Loose coupling
- Flexibility
- Easier testing
- Multiple inheritance simulation

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ë–æ–ª—å—à–µ –∫–æ–¥–∞
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## üß™ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏:
1. **Coupling Between Objects (CBO)** - —Å—Ç–µ–ø–µ–Ω—å —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
2. **Depth of Inheritance Tree (DIT)** - –≥–ª—É–±–∏–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏
3. **Number of Children (NOC)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–º–∫–æ–≤
4. **Response For Class (RFC)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤
5. **Lack of Cohesion in Methods (LCOM)** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å–≤—è–∑–Ω–æ—Å—Ç–∏

### –ì–∏–ø–æ—Ç–µ–∑—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- H‚ÇÅ: –ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Å–Ω–∏–∂–∞–µ—Ç CBO –Ω–∞ 30-50%
- H‚ÇÇ: –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç DIT, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- H‚ÇÉ: –ö–æ–º–ø–æ–∑–∏—Ü–∏—è —É–ª—É—á—à–∞–µ—Ç testability –Ω–∞ 40-60%
- H‚ÇÑ: –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å LSP –≤ 20-30% —Å–ª—É—á–∞–µ–≤

## üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### C++20 –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **Concepts** –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- **Modules** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
- **Coroutines** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
- **Strategy Pattern** –≤–º–µ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- **Decorator Pattern** –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **Bridge Pattern** –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:
1. **True "is-a" relationship** - —Ä–µ–∞–ª—å–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
2. **Polymorphism required** - –Ω–µ–æ–±—Ö–æ–¥–∏–º –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
3. **Interface inheritance** - –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
4. **Template Method Pattern** - –ø–∞—Ç—Ç–µ—Ä–Ω "–®–∞–±–ª–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥"

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é:
1. **"Has-a" relationship** - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ "–∏–º–µ–µ—Ç"
2. **Multiple behaviors** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
3. **Runtime flexibility** - –≥–∏–±–∫–æ—Å—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. **Testing requirements** - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
1. **Code reuse only** - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
2. **Implementation inheritance** - –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
3. **Deep hierarchies** - –≥–ª—É–±–æ–∫–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏
4. **Fragile base classes** - —Ö—Ä—É–ø–∫–∏–µ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã

## üìä –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—ã–±–æ—Ä –º–µ–∂–¥—É –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤ –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID.

**–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã**:
- –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏—Å—Ç–∏–Ω–Ω—ã—Ö "is-a" –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —è–∑—ã–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

---

*"Favor composition over inheritance"* - Gang of Four, Design Patterns
